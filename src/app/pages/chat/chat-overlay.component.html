<div class="fixed inset-0 z-50" (click)="close()">
  <div class="absolute inset-0 bg-black/40"></div>

  <div class="absolute inset-0 flex items-end justify-end p-4 sm:p-6 pointer-events-none">
    <div
      class="pointer-events-auto w-full max-w-5xl h-[78vh] bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden"
      (click)="$event.stopPropagation()"
    >
      <div class="h-full grid grid-cols-1 lg:grid-cols-[1fr_320px]">
        <app-chat
          [messages]="messages"
          [showResolutionActions]="showResolutionActions"
          (messageSent)="onMessageSent($event)"
          (resolved)="onResolved()"
          (unresolved)="onUnresolved()">
        </app-chat>
        <app-kb-panel [documents]="kbDocuments"></app-kb-panel>
      </div>
    </div>
  </div>
</div>
