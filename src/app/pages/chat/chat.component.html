<div class="flex h-full flex-col">
  <div class="border-b border-gray-200 p-4">
    <h3 class="text-sm font-semibold text-gray-800">Assistente Ticketing</h3>
    <p class="text-xs text-gray-500">Descrivi il problema e ti aiuto a risolverlo pi√π velocemente.</p>
  </div>

  <div class="flex-1 overflow-auto p-4 space-y-3 bg-white">
    <div *ngFor="let message of messages" class="flex" [class.justify-end]="message.sender === 'user'">
      <div
        class="max-w-[85%] rounded-xl px-3 py-2 text-sm"
        [class.bg-blue-600]="message.sender === 'user'"
        [class.text-white]="message.sender === 'user'"
        [class.bg-gray-100]="message.sender === 'bot'"
        [class.text-gray-800]="message.sender === 'bot'"
      >
        {{ message.text }}
      </div>
    </div>
  </div>

  <div class="border-t border-gray-200 p-3 bg-gray-50">
    <div class="flex gap-2">
      <input
        [(ngModel)]="draft"
        (keyup.enter)="send()"
        placeholder="Scrivi il tuo problema..."
        class="flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm"
      />
      <button
        (click)="send()"
        [disabled]="!draft.trim()"
        class="px-4 py-2 bg-blue-600 text-white text-sm rounded-lg disabled:bg-blue-300"
      >
        Invia
      </button>
    </div>

    <div *ngIf="showResolutionActions" class="mt-3 flex gap-2">
      <button (click)="markResolved()" class="px-3 py-2 text-xs rounded-lg border border-green-300 text-green-700 bg-green-50">
        Problema risolto
      </button>
      <button (click)="markUnresolved()" class="px-3 py-2 text-xs rounded-lg border border-amber-300 text-amber-700 bg-amber-50">
        Non risolto, apri ticket
      </button>
    </div>
  </div>
</div>
