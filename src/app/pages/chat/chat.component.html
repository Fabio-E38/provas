<div class="flex h-full flex-col">
  <div class="border-b border-gray-200 p-4">
    <h3 class="text-sm font-semibold text-gray-800">Assistente Ticketing</h3>
    <p class="text-xs text-gray-500">Descrivi il problema e ti aiuto a risolverlo pi√π velocemente.</p>
  </div>

  <div class="flex-1 overflow-auto p-4 space-y-3 bg-white">
    <div *ngFor="let message of messages" class="flex" [class.justify-end]="message.sender === 'user'">
      <div
        class="max-w-[85%] rounded-xl px-3 py-2 text-sm"
        [class.bg-blue-600]="message.sender === 'user'"
        [class.text-white]="message.sender === 'user'"
        [class.bg-gray-100]="message.sender === 'bot'"
        [class.text-gray-800]="message.sender === 'bot'"
      >
        {{ message.text }}
      </div>
    </div>
  </div>

  <div class="bg-[#010201] px-5 pt-3 pb-5 relative overflow-hidden rounded-b-2xl">

    <!-- Resolution action buttons -->
    <div *ngIf="showResolutionActions" class="mb-3 flex gap-2">
      <button
        (click)="markResolved()"
        class="px-3 py-2 text-xs rounded-lg border border-emerald-700 text-emerald-400 bg-emerald-950/50 hover:bg-emerald-900/50 transition-colors"
      >
        Problema risolto
      </button>
      <button
        (click)="markUnresolved()"
        class="px-3 py-2 text-xs rounded-lg border border-amber-700 text-amber-400 bg-amber-950/50 hover:bg-amber-900/50 transition-colors"
      >
        Non risolto, apri ticket
      </button>
    </div>

    <!-- Grid background -->
    <div class="poda-grid"></div>

    <!-- Fancy input -->
    <div id="poda">
      <div class="darkBorderBg"></div>
      <div class="glow"></div>
      <div id="main">
        <div class="poda-white"></div>
        <div class="poda-border"></div>
        <input
          class="poda-input"
          [(ngModel)]="draft"
          (keyup.enter)="send()"
          placeholder="Scrivi il tuo problema..."
        />
        <div id="input-mask"></div>
        <div id="pink-mask"></div>
        <div class="filterBorder"></div>
        <div id="filter-icon" (click)="send()" style="cursor:pointer">
          <!-- Send icon -->
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
               stroke="#a99dd8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="22" y1="2" x2="11" y2="13"></line>
            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
          </svg>
        </div>
        <div id="search-icon">
          <!-- Chat bubble icon -->
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
               stroke="#c0b9c0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg>
        </div>
      </div>
    </div>

  </div>
</div>
